<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript" src="js/three.min.js" ></script>
		<script type="text/javascript" src="js/OBJLoader.js" ></script>
		<script type="text/javascript" src="js/MTLLoader.js" ></script>
		<script type="text/javascript" src="js/tween.js" ></script>
	</head>
	<style>
	    body,html{width: 100%;height: 100%;margin: 0;padding: 0;overflow: hidden;}
		#world{
			width: 100%;
			height: 100%;
		}
		#title{
			position: absolute;
			top: 0;
			left: 0;
			font-size: 30px;
			font-family:  "bodoni mt black";
			color: white;
			text-shadow: 3px 3px 1px #000;
		}
		#github{
			display: block;
			position: absolute;
			bottom: 50px;
			left: 20px;
			font-size: 22px;
			font-family: "微软雅黑";
			color: white;
			text-shadow: 3px 3px 1px #000;
			text-decoration: none;
		}
		#dayOrnight{
			position: absolute;
			top: 50px;
			left: 50px;
			width: 100px;
			height: 100px;
			overflow: hidden;
		}
		#box{
			width: 100px;
			height: 200px;
		}
		#day{
			display: block;
			width:100px;
			height: 100px;
			cursor: pointer;
		}
		#night{
			display: block;
			width:50px;
			height: 50px;
			padding: 30px 0 0 20px;
			cursor: pointer;
		}
	</style>
	<body>
		<div id="world">
			<!--画布-->
		</div>
		<div id="title">
			Lab-5-island
		</div>
		<div id="dayOrnight">
			<div id="box">
				<img id="day" src="img/白天模式.png"/>
				<img id="night" src="img/晴夜晚.png" />
			</div>
		</div>
		</div>
		<a id="github" href="https://github.com/johanzhu" target="_blank">
		    Follow me on github
		</a>
		<script>
			var scene,
			camera,
			renderer,
			
			scene = new THREE.Scene();
		    camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,3000);
			camera.position.set(0,0,800);
			camera.lookAt(new THREE.Vector3(0,0,0));
		    renderer = new THREE.WebGLRenderer({alpha:true,antialias:true});
		    renderer.setSize(window.innerWidth,window.innerHeight);
		    renderer.shadowMapEnabled = true;
		    var container =  document.getElementById('world');
		    container.appendChild(renderer.domElement);
		    window.addEventListener('resize',onWindowResize,false);
		    function onWindowResize(){
	           WIDTH=window.innerWidth;
	           HEIGHT=window.innerHeight;
               renderer.setSize(WIDTH, HEIGHT);
               camera.aspect = WIDTH / HEIGHT;
               camera.updateProjectionMatrix();
            }
		    
		    
		    
		    var ambient = new THREE.AmbientLight( 0x333333 );
			scene.add( ambient );
			var pointLight = new THREE.PointLight(0xffeedd);
			pointLight.intensity = 0.8;
			scene.add(pointLight);
			var directionalLight = new THREE.DirectionalLight( 0xffeedd );
			directionalLight.intensity = 0.2;
			directionalLight.position.set( 0, 0.5, 1 );
			scene.add( directionalLight );
            
			
	    var onProgress = function ( xhr ) {
		if ( xhr.lengthComputable ) {
			var percentComplete = xhr.loaded / xhr.total * 100;
					}
		};
        var onError = function ( xhr ) { };
        var mtlLoader1 = new THREE.MTLLoader();
            mtlLoader1.setPath( 'img/' );
            mtlLoader1.load( 'stone.mtl', function( materials ) {materials.preload();
        var objLoader1 = new THREE.OBJLoader();
            objLoader1.setMaterials( materials );
            objLoader1.setPath( 'img/' );
            objLoader1.load( 'stone.obj', function ( object ) {
            	console.log(object);
            var tween1 = new TWEEN.Tween(object.position).to({y:10},1000);
            var tween2 = new TWEEN.Tween(object.position).to({y:0},1000);
            tween1.chain(tween2);
            tween2.chain(tween1);
            tween1.start();
		scene.add( object );animate();
		}, onProgress, onError );});
	    
	    var mtlLoader2 = new THREE.MTLLoader();
            mtlLoader2.setPath( 'img/' );
            mtlLoader2.load( 'house.mtl', function( materials ) {materials.preload();
        var objLoader2 = new THREE.OBJLoader();
            objLoader2.setMaterials( materials );
            objLoader2.setPath( 'img/' );
            objLoader2.load( 'house.obj', function ( object ) {
            var tween1 = new TWEEN.Tween(object.position).to({y:8},1000);
            var tween2 = new TWEEN.Tween(object.position).to({y:0},1000);
            tween1.chain(tween2);
            tween2.chain(tween1);
            tween1.start();
		scene.add( object );animate();
		}, onProgress, onError );});
		
		var mtlLoader3 = new THREE.MTLLoader();
            mtlLoader3.setPath( 'img/' );
            mtlLoader3.load( 'treegroup.mtl', function( materials ) {materials.preload();
        var objLoader3 = new THREE.OBJLoader();
            objLoader3.setMaterials( materials );
            objLoader3.setPath( 'img/' );
            objLoader3.load( 'treegroup.obj', function ( object ) {
            var tween1 = new TWEEN.Tween(object.position).to({y:8},1000);
            var tween2 = new TWEEN.Tween(object.position).to({y:0},1000);
            tween1.chain(tween2);
            tween2.chain(tween1);
            tween1.start();
		scene.add( object );animate();
		}, onProgress, onError );});
	    
	    var mtlLoader4 = new THREE.MTLLoader();
            mtlLoader4.setPath( 'img/' );
            mtlLoader4.load( 'cloud.mtl', function( materials ) {materials.preload();
        var objLoader4 = new THREE.OBJLoader();
            objLoader4.setMaterials( materials );
            objLoader4.setPath( 'img/' );
            objLoader4.load( 'cloud.obj', function ( object ) {
            object.scale.set(1.5,1,1);
		scene.add( object );animate();
		}, onProgress, onError );});
		
		var mtlLoader5 = new THREE.MTLLoader();
            mtlLoader5.setPath( 'img/' );
            mtlLoader5.load( '宝石1.mtl', function( materials ) {materials.preload();
        var objLoader5 = new THREE.OBJLoader();
            objLoader5.setMaterials( materials );
            objLoader5.setPath( 'img/' );
            objLoader5.load( '宝石1.obj', function ( object ) {
            var tween1 = new TWEEN.Tween(object.position).to({x:0,y:8},1000);
            var tween2 = new TWEEN.Tween(object.position).to({x:-10,y:0},1000);
            tween1.chain(tween2);
            tween2.chain(tween1);
            tween1.start();
		scene.add( object );animate();
		}, onProgress, onError );});
		
		var mtlLoader6 = new THREE.MTLLoader();
            mtlLoader6.setPath( 'img/' );
            mtlLoader6.load( '宝石2.mtl', function( materials ) {materials.preload();
        var objLoader6 = new THREE.OBJLoader();
            objLoader6.setMaterials( materials );
            objLoader6.setPath( 'img/' );
            objLoader6.load( '宝石2.obj', function ( object ) {
            var tween1 = new TWEEN.Tween(object.position).to({y:10},1000);
            var tween2 = new TWEEN.Tween(object.position).to({y:0},1000);
            tween1.chain(tween2);
            tween2.chain(tween1);
            tween1.start();
		scene.add( object );animate();
		}, onProgress, onError );});
		
		var mtlLoader7 = new THREE.MTLLoader();
            mtlLoader7.setPath( 'img/' );
            mtlLoader7.load( '宝石3.mtl', function( materials ) {materials.preload();
        var objLoader7 = new THREE.OBJLoader();
            objLoader7.setMaterials( materials );
            objLoader7.setPath( 'img/' );
            objLoader7.load( '宝石3.obj', function ( object ) {
            var tween1 = new TWEEN.Tween(object.position).to({x:-10,y:7},1000);
            var tween2 = new TWEEN.Tween(object.position).to({x:0,y:8},1000);
            tween1.chain(tween2);
            tween2.chain(tween1);
            tween1.start();
		scene.add( object );animate();
		}, onProgress, onError );});
		
		var mtlLoader8 = new THREE.MTLLoader();
            mtlLoader8.setPath( 'img/' );
            mtlLoader8.load( '宝石4.mtl', function( materials ) {materials.preload();
        var objLoader8 = new THREE.OBJLoader();
            objLoader8.setMaterials( materials );
            objLoader8.setPath( 'img/' );
            objLoader8.load( '宝石4.obj', function ( object ) {
            var tween1 = new TWEEN.Tween(object.position).to({y:10},1000);
            var tween2 = new TWEEN.Tween(object.position).to({y:0},1000);
            tween1.chain(tween2);
            tween2.chain(tween1);
            tween1.start();
		scene.add( object );animate();
		}, onProgress, onError );});
		
		var mtlLoader9 = new THREE.MTLLoader();
            mtlLoader9.setPath( 'img/' );
            mtlLoader9.load( 'sky.mtl', function( materials ) {materials.preload();
        var objLoader9 = new THREE.OBJLoader();
            objLoader9.setMaterials( materials );
            objLoader9.setPath( 'img/' );
            objLoader9.load( 'sky.obj', function ( object ) {
            	object.position.set(0,0,-100);
            	object.scale.set(1.6,1.6,1);
		scene.add( object );animate();
		}, onProgress, onError );});
		
			
	        
			
		function animate(){
		  requestAnimationFrame(animate);
		    render();
		}
		function render(){
		 TWEEN.update();
	        renderer.render(scene,camera);
        }
		</script>
	<script type="text/javascript" src="js/light.js" ></script>
	</body>
</html>